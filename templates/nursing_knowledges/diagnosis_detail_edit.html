{% extends 'base.html' %}
{% load static %}

{% block title %} {{diagnosis.name}} {% endblock title %}

{% block css %}
    <link rel="stylesheet" href="{% static 'nursing_knowledges/css/knowledge_detail.css' %}">
    <link rel="stylesheet" href="{% static 'nursing_knowledges/css/knowledge_detail_edit.css' %}">
    <link rel="stylesheet" href="{% static 'nursing_knowledges/css/diagnosis_detail_edit.css' %}">
{% endblock css %}

{% block link %}
{% endblock link %}

{% block head_script %}
{% endblock head_script %}

{% block content %}
<form class="root" id="edit_form"class="root" method="post">
    {% csrf_token %}
    <div class="knowledge_header">
        <div class="knowledge_header__category">진단</div>
        <h1 class="knowledge_header__name js-knowledge_name">{{diagnosis.name}}</h1>
    </div>

    <div class="knowledge_info">
        {{form.definition}}
        {{form.definition.errors}}
    </div>

    <div class="knowledge_info">
        <div class="knowledge_info__title">관련 대표 중재</div>
        {{form.intervention_content}}
        {{form.intervention_content.errors}}
    </div>

    <div class="knowledge_info relative_diagnosis">
        <div class="knowledge_info__title">관련 간호진단</div>
        <div class="diagnoses_list js-diagnoses_list">
            {% for item in related_diagnoses%}
                <div class="diagnosis_set">
                    <input type="checkbox" id="{{item.to_diagnosis.name}}" name="added_{{item.to_diagnosis.name}}" checked>
                    <label for="{{item.to_diagnosis.name}}">{{item.to_diagnosis.name}}</label>
                </div>
            {% endfor%}
        </div>
        <div class="add_diagnosis_wrapper">
            <input list="all_diagnosis" id="selected_diagnosis" name="selected_diagnosis" />
            <datalist id="all_diagnosis">
                {% for d in all_diagnosis %}
                    <option value="{{d}}">
                {% endfor %}
            </datalist>
            <button class="add_diagnosis_btn js-add_diagnosis_btn">진단 추가</button>
        </div>
    </div>


    <div class="submit_wrapper">
        <button class="submit_btn" type="submit" form="edit_form">수정하기</button>
    </div>

</form>
{% endblock content %}



{% block script %}
<script src="{% static 'assets/js/diagnosisDetailEdit.js' %}"></script>
{% endblock script %}
